---
icon: ri:windows-fill
---
# Windows模擬器支持

::: tip
遇到問題請先參閱 [常見問題](1.2-常見問題.md)
:::

以下模擬器排序為隨機生成，排名不分先後

<script setup>
import MarkdownIt from 'markdown-it'
import MarkdownItAnchor from 'markdown-it-anchor'

const shuffleArray = (array) => {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

const fullySupport = shuffleArray([
`
### ✅ [藍疊模擬器 5](https://www.bluestacks.cn/)
完美支持。需要在模擬器 \`設置\` - \`引擎設置\` 中打開 \`允許ADB連接\`
`,
`
### ✅ [藍疊模擬器國際版 5](https://www.bluestacks.com/tw/index.html)（最穩定👍）

完美支持。需要在模擬器 \`設定\` - \`進階\` 中打開 \`Android調試橋\`。

- 若網絡環境較差可嘗試下載 [離線安裝包](https://support.bluestacks.com/hc/zh-tw/articles/4402611273485-BlueStacks-5-%E9%9B%A2%E7%B7%9A%E5%AE%89%E8%A3%9D%E7%A8%8B%E5%BC%8F)；
- 若 adb 端口號不斷的無規律變動，每次啟動都不相同，可能是因為您的電腦開啟了 [Hyper-V](https://support.bluestacks.com/hc/zh-tw/articles/4415238471053-BlueStacks-5-%E6%94%AF%E6%8F%B4-Hyper-V-%E7%9A%84-Windows-10-%E5%92%8C-11-%E4%B8%8A%E7%9A%84%E9%9B%BB%E8%85%A6%E8%A6%8F%E6%A0%BC%E9%9C%80%E6%B1%82)，
    MAA 現在會嘗試自動讀取藍疊模擬器配置文件內的端口號，若該功能失效/你有多開需求/安裝了多個模擬器核心，請參考 [常見問題](1.2-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html#藍疊模擬器每次啟動端口號都不一樣-hyper-v) 做出修改。
`,
`
### ✅ [夜神模擬器](https://www.yeshen.com/)

完美支持。
`,
`
### ✅ [夜神模擬器 安卓 9](https://www.yeshen.com/)

完美支持。
`,
`
### ✅ [逍遙模擬器](https://www.xyaz.cn/)

完美支持，但測試較少。
`,
`
### ✅ [AVD](https://developer.android.com/studio/run/managing-avds)

完美支持。
`,
`
### ✅ [MuMu 模擬器 12](https://mumu.163.com/)（最流暢👍）

完美支持。

- “完成後退出模擬器”功能可能偶現異常，如果遇到請向 MuMu 官方反饋；
- 高版本 MuMu 12 引入的“後臺保活”功能會導致截圖失敗，如您使用大於等於 3.5.4 版本的MuMu 12，請確認 MuMu 12 設置-其他 中將“後臺掛機時保活運行”功能關閉（詳見[官方公告](https://mumu.163.com/help/20230802/35047_1102450.html)）；
- 多開時需通過 MuMu 12 多開器的 ADB 按鈕，查看對應實例的端口信息，將 MAA 設置-連接設置 的連接地址的端口號修改為對應的端口。
`,
`
### ✅ [雷電模擬器](https://www.ldmnq.com/)

完美支持。

- **雷電 9 推薦使用 9.0.57 及以上版本；雷電 5 推薦使用 5.0.67 及以上版本；**
- 低於上述版本則需要在 MAA 設置 - 連接設置 中，進行 \`強制替換 ADB\`，才能使用 minitouch, maatouch 等高效的觸控模式。
`,
])

const particallySupport = shuffleArray([
`
### ⚠️ [MuMu 模擬器 6](https://mumu.163.com/)

支持。但：

- 需要在 MAA 設置 - 連接設置 中，進行 \`強制替換 ADB\`，才能使用 minitouch, maatouch 等高效的觸控模式；
- 需要使用管理員權限運行 MAA 才能自動獲取 adb 路徑和地址（因為 MuMu 6 本身是管理員啟動的）；
- 需要使用管理員權限運行 MAA 才能支持“完成後退出模擬器”相關功能；
- 不推薦使用 MuMu 6 默認的幾個奇葩分辨率，最好改成主流的 \`1280x720\`, \`1920x1080\`, \`2560x1440\` 等；
- MuMu 6 多開使用的是同一個 adb 端口，所以無法支持多開的 MuMu 6。
`,
`
### ⚠️ [Win11 WSA](https://docs.microsoft.com/zh-cn/windows/android/wsa/)

勉強支持。

- 需要使用 [自定義連接](1.1-詳細介紹.html#自定義連接) 的方式來連接；
- WSA 2204 或更高版本（版本號在子系統設置的 \`關於\` 頁面中），連接配置選擇 \`通用配置\`；
- WSA 2203 或更老版本（版本號在子系統設置頁面的上方），連接配置選擇 \`WSA 舊版本\`；
- 由於本軟件僅對 720p 以上 \`16:9\` 分辨率支持較好，所以請手動拖動窗口大小，儘量貼近 16:9 比例。（如果你的顯示器是 16:9 的，可以直接按 \`F11\` 全屏）；
- 任務運行過程中請儘量保證明日方舟在前臺且無其他安卓應用同時在前臺運行，否則可能導致遊戲暫停運行或任務識別錯誤；
- WSA 的截圖經常莫名其妙截出來一個白屏，導致識別異常，還是不推薦使用。
`,
])

const notSupport = shuffleArray([
`
### 🚫 MuMu 手遊助手（星雲引擎）

不支持，未開放 adb 端口。
`,
`
### 🚫 騰訊手遊助手

不支持，未開放 adb 端口。
`,
])

const md = (new MarkdownIt()).use(MarkdownItAnchor, { permalink: MarkdownItAnchor.permalink.linkInsideHeader()})

const fullySupportHtml = md.render(fullySupport.join(''))
const partiallySupportHtml = md.render(particallySupport.join(''))
const notSupportHtml = md.render(notSupport.join(''))

</script>

## ✅ 完美支持

<ClientOnly><div v-html="fullySupportHtml"></div></ClientOnly>

## ⚠️ 部分支持

<ClientOnly><div v-html="partiallySupportHtml"></div></ClientOnly>

## 🚫 不支持

<ClientOnly><div v-html="notSupportHtml"></div></ClientOnly>

## ⚙️ 手機、平板等實體**安卓**設備

::: info 注意
本段內容雖已儘可能寫的的簡潔易懂，但也許仍對部分萌新用戶不甚友好。若嫌麻煩、看不懂或操作不清還請繼續使用模擬器
:::

以 Windows 用戶為主，其他系統請照葫蘆畫瓢。

- 由於 MAA 僅對 `16:9` 比例的 `720p` 及更高分辨率的支持較為完善，所以非 `16:9` 或 `9:16` 屏幕比例的設備需要強制修改分辨率，這包含大多數現代手機。
- 若被連接設備屏幕分辨率比例原生為 `16:9` 或 `9:16`，則可跳過 `更改分辨率` 部分。

::: tip
典型的 `16:9` 比例的分辨率有 `3840*2160`、`2560*1440`、`1920*1080`、`1280*720` 等
:::

### 下載、運行 adb 調試工具並連接設備

1. 下載 [adb](https://dl.google.com/android/repository/platform-tools-latest-windows.zip) 並解壓。
2. 打開解壓後的文件夾，清空地址欄並輸入 `cmd` 後回車。
3. 在彈出的命令提示符窗口中輸入 `adb` ，若給出大量英文幫助文本則運行成功。
4. 手機開啟 `USB 調試`，具體步驟可使用搜索引擎搜索 `<機型> + 開啟 USB 調試`。
5. 將手機通過數據線連接至電腦，在剛剛的命令提示符窗口中輸入以下命令。

    ```bash
    adb devices
    ```

- 成功執行後會給出已連接 `USB 調試` 設備的信息。

  - 連接成功的例子：

      ```bash
      List of devices attached
      VFNDU1682100xxxx        device
      ```

  - **`device` 前的英文數字組合為設備序列號，同時也作為 MAA 的 `連接地址`。**

- 現代安卓設備進行 `USB調試` 需在被調試設備上點擊彈窗授權，若未授權則例子如下：

    ```bash
    List of devices attached
    VFNDU1682100xxxx        unauthorized
    ```

- 若無論如何都提示未授權或設備序列號後顯示 `offline`，則需重啟設備及電腦後重試。如仍未解決問題，可刪除當前用戶個人文件夾下的 `.android` 文件夾並再次重啟後重試，具體位置請自行搜索。

### 更改分辨率

::: tip
手機屏幕分辨率為 `短邊*長邊`，而非電腦顯示器的 `長邊*短邊`。具體數值請根據目標設備自行確定。
:::

- 如果上文設備列表內僅有一臺設備，則可直接運行以下命令更改/還原分辨率。

    ```bash
    adb shell wm size               # 查看當前分辨率
    adb shell wm size reset         # 還原默認分辨率
    
    adb shell wm size 720x1280      # 更改分辨率為 720p
    adb shell wm size 1080x1920     # 更改分辨率為 1080p
    ```

- 若存在多臺設備，則需在 `adb` 和 `shell` 中間添加參數 `-s <目標設備序列號>`，例子如下。

    ```bash
    adb -s VFNDU1682100xxxx shell wm size               # 查看當前分辨率
    adb -s VFNDU1682100xxxx shell wm size reset         # 還原默認分辨率
    
    adb -s VFNDU1682100xxxx shell wm size 720x1280      # 更改分辨率為 720p
    adb -s VFNDU1682100xxxx shell wm size 1080x1920     # 更改分辨率為 1080p
    ```

- 部分設計不規範的應用可能在還原分辨率後內容佈局仍然錯亂，一般重啟對應應用或設備即可解決。

::: danger 注意
務必於**重啟設備前**還原分辨率 ，否則因設備而定可能會導致不可預料的後果 ~~，包括但不限於佈局錯亂，應用閃退，無法開機等~~ 
:::

### 自動化更改分辨率

1. 在 MAA 目錄下新建兩個文本文件，分別在其中填入以下內容。

    ```bash
    ::調整分辨率為 1080p
    adb -s <目標設備序列號> shell wm size 1080x1920
    ::降低屏幕亮度（可選）
    adb -s <目標設備序列號> shell settings put system screen_brightness 1 
    ```

    ```bash
    ::還原分辨率
    adb -s <目標設備序列號> shell wm size reset
    ::提高屏幕亮度（可選）
    adb -s <目標設備序列號> shell settings put system screen_brightness 20
    ::返回桌面（可選）
    adb -s <目標設備序列號> shell input keyevent 3
    ::鎖屏（可選）
    adb -s <目標設備序列號> shell input keyevent 26
    ```

2. 將第一個文件重命名為 `startup.bat`，第二個文件重命名為 `finish.bat`。

    - 如果重命名後沒有彈出修改擴展名的二次確認對話框，且文件圖標沒有變化，請自行搜索“Windows如何顯示文件擴展名”。

3. 在 MAA 的 `設置` - `連接設置` - `開始前腳本` 和 `結束後腳本` 中分別填入 `startup.bat` 和 `finish.bat`。

### 連接 MAA

1. 將上文解壓文件夾內的 `adb.exe` 路徑填入 MAA `設置` - `連接設置` - `adb 路徑` 中，可右鍵屬性查看路徑。
2. 因不同安卓版本輸出差異較大，請在 MAA `設置` - `連接設置` 中嘗試將 `連接配置` 修改為 `通用模式`、`兼容模式`、`第二分辨率`、`通用模式（屏蔽異常輸出）` 其中之一，直到某個模式可以連上並正常使用。
3. 將遊戲內設置中的 `異形屏UI適配` 一項調整為 0 以防止操作錯位。

#### 有線連接

1. 將上文獲取到的目標設備序列號填入 MAA `設置` - `連接設置` - `連接地址` 中。
2. Link Start!
3. 任務結束後還原設備分辨率。

#### 無線連接

- 請確保設備與電腦處在同一局域網環境下且能互相通信。諸如 `AP 隔離`、`訪客網絡` 等設置會阻止設備間通信，具體請查閱對應路由器文檔。
- MAA 不支持 `adb pair` 無線配對方式連接，即通過安卓 11 及更新版本中開發者選項內的 `無線調試` 進行連接。
- 無線調試在設備重啟後失效，需要重新設置。

1. 在剛剛的命令提示符窗口中輸入以下命令以開啟無線調試。

    ```bash
    adb tcpip 5555     # 如存在多臺設備可參照上文內容在 adb 和 tcpip 中間添加參數
    ```

2. 查看設備 IP 地址。

    - 進入手機 `設置` - `WLAN`，點擊當前已連接的無線網絡查看 IP 地址。
    - 各類品牌設備設置位置不同，請自行查找。

3. 將 `<IP>:5555` 填入 MAA `設置` - `連接設置` - `連接地址` 中，如 `192.168.1.2:5555`。
4. Link Start!
5. 任務結束後還原設備分辨率。

::: note
如連接失敗並提示“發生未知錯誤”，有可能是觸控模式 `Minitouch` 的問題，可切換到 `MaaTouch` 再次嘗試。由於 `Adb Input` 操作過於緩慢，請僅將其作為萬不得已的模式。
::: 
